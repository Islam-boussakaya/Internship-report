%% Generated by Sphinx.
\def\sphinxdocclass{jupyterBook}
\documentclass[letterpaper,10pt,english]{jupyterBook}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax
\ifdefined\pdfimageresolution
    \pdfimageresolution= \numexpr \dimexpr1in\relax/\sphinxpxdimen\relax
\fi
%% let collapsible pdf bookmarks panel have high depth per default
\PassOptionsToPackage{bookmarksdepth=5}{hyperref}
%% turn off hyperref patch of \index as sphinx.xdy xindy module takes care of
%% suitable \hyperpage mark-up, working around hyperref-xindy incompatibility
\PassOptionsToPackage{hyperindex=false}{hyperref}
%% memoir class requires extra handling
\makeatletter\@ifclassloaded{memoir}
{\ifdefined\memhyperindexfalse\memhyperindexfalse\fi}{}\makeatother

\PassOptionsToPackage{warn}{textcomp}

\catcode`^^^^00a0\active\protected\def^^^^00a0{\leavevmode\nobreak\ }
\usepackage{cmap}
\usepackage{fontspec}
\defaultfontfeatures[\rmfamily,\sffamily,\ttfamily]{}
\usepackage{amsmath,amssymb,amstext}
\usepackage{polyglossia}
\setmainlanguage{english}



\setmainfont{FreeSerif}[
  Extension      = .otf,
  UprightFont    = *,
  ItalicFont     = *Italic,
  BoldFont       = *Bold,
  BoldItalicFont = *BoldItalic
]
\setsansfont{FreeSans}[
  Extension      = .otf,
  UprightFont    = *,
  ItalicFont     = *Oblique,
  BoldFont       = *Bold,
  BoldItalicFont = *BoldOblique,
]
\setmonofont{FreeMono}[
  Extension      = .otf,
  UprightFont    = *,
  ItalicFont     = *Oblique,
  BoldFont       = *Bold,
  BoldItalicFont = *BoldOblique,
]



\usepackage[Bjarne]{fncychap}
\usepackage[,numfigreset=1,mathnumfig]{sphinx}

\fvset{fontsize=\small}
\usepackage{geometry}


% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}


\usepackage{sphinxmessages}



        % Start of preamble defined in sphinx-jupyterbook-latex %
         \usepackage[Latin,Greek]{ucharclasses}
        \usepackage{unicode-math}
        % fixing title of the toc
        \addto\captionsenglish{\renewcommand{\contentsname}{Contents}}
        \hypersetup{
            pdfencoding=auto,
            psdextra
        }
        % End of preamble defined in sphinx-jupyterbook-latex %
        

\title{BUSINESS INTELLIGENCE INCLUDES FOOTBALL ANALYSIS}
\date{Apr 11, 2022}
\release{}
\author{Boussoukaya Islam}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{}
\makeindex
\begin{document}

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{intro::doc}}

\begin{itemize}
\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{Chap1/Chap1::doc}]{\sphinxcrossref{Kloppy Featuring InStat}}}

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{Chap2/chap2::doc}]{\sphinxcrossref{Physical  report}}}

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{Chap3/Chap3::doc}]{\sphinxcrossref{Data Visualization}}}

\end{itemize}


\chapter{Kloppy Featuring InStat}
\label{\detokenize{Chap1/Chap1:kloppy-featuring-instat}}\label{\detokenize{Chap1/Chap1::doc}}

\section{Introduction}
\label{\detokenize{Chap1/Chap1:introduction}}
\sphinxAtStartPar
Each football data provider uses its own unique format to describe the sequence of a game.
Therefore, the software written to analyze this data must be suitable for a specific provider and cannot be used without modifications to analyze the data of other providers.

\sphinxAtStartPar
Kloppy is a Python package that addresses the challenges posed by the variety of data formats and aims to be the fundamental building block for processing soccer tracking and event data.
\begin{itemize}
\item {} 
\sphinxAtStartPar
How can the kloppy package deal with all these providers and generate the same result for each one? and which providers can support?

\end{itemize}


\section{Problematic}
\label{\detokenize{Chap1/Chap1:problematic}}
\sphinxAtStartPar
Before delving into the details we will identify the problematic . The Company is delivered with football data from different providers, In our case, we will point to the Instat provider. We simply want to adapt the Instat provider to the Kloppy package to be able to use its many features.


\section{The Kloppy Package}
\label{\detokenize{Chap1/section1:the-kloppy-package}}\label{\detokenize{Chap1/section1::doc}}

\subsection{What is Kloppy ?}
\label{\detokenize{Chap1/section1:what-is-kloppy}}
\sphinxAtStartPar
As previously mentioned kloppy is a great package , It provides (de)serializers, standardized data models, filters, and transformers to facilitate work with different tracking and event data from various providers,So its main features are to load data and transform it into standardized models and vice versa.
In the following sections we will try to break\sphinxhyphen{}down the package to better understand the process and it works.


\subsection{Kloppy providers}
\label{\detokenize{Chap1/section1:kloppy-providers}}
\sphinxAtStartPar
Kloppy support numerous provider with different format file (JSON \& LXML) as the table below shows.
To simplify the process, these providers display a different data structure within each format, “Kloppy” will proceed with each one to provide the same final result structure for each game.


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|}
\hline
\sphinxstyletheadfamily 
\sphinxAtStartPar
Provider
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Format
\\
\hline
\sphinxAtStartPar
Datafactory
&
\sphinxAtStartPar
JSON
\\
\hline
\sphinxAtStartPar
Metrica
&
\sphinxAtStartPar
JSON
\\
\hline
\sphinxAtStartPar
Opta
&
\sphinxAtStartPar
LXML
\\
\hline
\sphinxAtStartPar
Sportec
&
\sphinxAtStartPar
LXML
\\
\hline
\sphinxAtStartPar
Statsbomb
&
\sphinxAtStartPar
JSON
\\
\hline
\sphinxAtStartPar
Wyscout
&
\sphinxAtStartPar
JSON
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


\subsection{What is events \& line\sphinxhyphen{}up data in football?}
\label{\detokenize{Chap1/section1:what-is-events-line-up-data-in-football}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Events DataEvent data can be considered as a record of the entire game, it records every move on the pitch during the match. It includes the positions of each player and data pertaining to every action during the match which include pass, shot, interception, card, goal etc.

\item {} 
\sphinxAtStartPar
Line\sphinxhyphen{}up Data
The line\sphinxhyphen{}up data contain the lineup of players, starting \& ending tactic . It includes player information full name , jersey number , starting \& ending position etc.

\end{itemize}


\subsection{Example}
\label{\detokenize{Chap1/section1:example}}
\sphinxAtStartPar
To better understand what we are looking for as a result here an code example and its output.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics{{optaexp}.png}
\caption{Code exemple of Opta provider. Using filter for event types as pass and shot.}\label{\detokenize{Chap1/section1:optaexp-fig}}\end{figure}


\subsection{Kloppy Event Types}
\label{\detokenize{Chap1/section1:kloppy-event-types}}
\sphinxAtStartPar
“Kloppy” classifies events depending on the type of event.
For each event type kloppy defines a class that we will detail.


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|}
\hline
\sphinxstyletheadfamily 
\sphinxAtStartPar
Events Types
\\
\hline
\sphinxAtStartPar
Pass
\\
\hline
\sphinxAtStartPar
Shot
\\
\hline
\sphinxAtStartPar
Take on
\\
\hline
\sphinxAtStartPar
Carry
\\
\hline
\sphinxAtStartPar
Substitution
\\
\hline
\sphinxAtStartPar
PlayerOn/Off
\\
\hline
\sphinxAtStartPar
Card
\\
\hline
\sphinxAtStartPar
Recovery
\\
\hline
\sphinxAtStartPar
Ball Out
\\
\hline
\sphinxAtStartPar
Foul Committed
\\
\hline
\sphinxAtStartPar
Generic
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


\subsubsection{Pass Event}
\label{\detokenize{Chap1/section1:pass-event}}
\sphinxAtStartPar
A class entitled “Pass Event” contains the following attributes:
\begin{itemize}
\item {} 
\sphinxAtStartPar
recieve timestamp

\item {} 
\sphinxAtStartPar
receiver player

\item {} 
\sphinxAtStartPar
receiver coordinates \sphinxstylestrong{Point}

\item {} 
\sphinxAtStartPar
result \sphinxstylestrong{Pass Result}

\end{itemize}


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|}
\hline
\sphinxstyletheadfamily 
\sphinxAtStartPar
Attribute
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Definition
\\
\hline
\sphinxAtStartPar
COMPLETE
&
\sphinxAtStartPar
Complete pass
\\
\hline
\sphinxAtStartPar
INCOMPLETE
&
\sphinxAtStartPar
Incomplete pass (intercepted)
\\
\hline
\sphinxAtStartPar
OUT
&
\sphinxAtStartPar
Ball went out
\\
\hline
\sphinxAtStartPar
OFFSIDE
&
\sphinxAtStartPar
Offside
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Pass type, a enumeration class named “Pass Type”

\end{itemize}


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|}
\hline
\sphinxstyletheadfamily 
\sphinxAtStartPar
PassType
\\
\hline
\sphinxAtStartPar
Cross
\\
\hline
\sphinxAtStartPar
Hand pass
\\
\hline
\sphinxAtStartPar
Head pass
\\
\hline
\sphinxAtStartPar
High pass
\\
\hline
\sphinxAtStartPar
Launch
\\
\hline
\sphinxAtStartPar
Simple pass
\\
\hline
\sphinxAtStartPar
Smart pass
\\
\hline
\sphinxAtStartPar
Long pass
\\
\hline
\sphinxAtStartPar
Through ball
\\
\hline
\sphinxAtStartPar
Chipped pass
\\
\hline
\sphinxAtStartPar
Flick on
\\
\hline
\sphinxAtStartPar
Assit
\\
\hline
\sphinxAtStartPar
Assist 2nd
\\
\hline
\sphinxAtStartPar
Swithc of play
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


\subsubsection{Shot Event}
\label{\detokenize{Chap1/section1:shot-event}}
\sphinxAtStartPar
A class entitled “Shot Event” contains the following attributes:
\begin{itemize}
\item {} 
\sphinxAtStartPar
result of the shot as \sphinxstylestrong{shot Result}

\end{itemize}


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|}
\hline
\sphinxstyletheadfamily 
\sphinxAtStartPar
Attribute
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Definition
\\
\hline
\sphinxAtStartPar
Goal
&
\sphinxAtStartPar
Shot resulted in a goal
\\
\hline
\sphinxAtStartPar
Ooff targer
&
\sphinxAtStartPar
Shot was off target
\\
\hline
\sphinxAtStartPar
Post
&
\sphinxAtStartPar
Shot hit the post
\\
\hline
\sphinxAtStartPar
Blocked
&
\sphinxAtStartPar
Shot was blocked by another player
\\
\hline
\sphinxAtStartPar
Saved
&
\sphinxAtStartPar
Shot was saved by the keeper
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}
\begin{itemize}
\item {} 
\sphinxAtStartPar
result coordinates \sphinxstylestrong{Point}

\end{itemize}


\subsubsection{Take on Event}
\label{\detokenize{Chap1/section1:take-on-event}}
\sphinxAtStartPar
A class entitled “Take\sphinxhyphen{}on Event” contains the following attributes:
\begin{itemize}
\item {} 
\sphinxAtStartPar
result of the take on \sphinxstylestrong{Take on Result}

\end{itemize}


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|}
\hline
\sphinxstyletheadfamily 
\sphinxAtStartPar
Attribute
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Definition
\\
\hline
\sphinxAtStartPar
Complete
&
\sphinxAtStartPar
Complete take\sphinxhyphen{}on
\\
\hline
\sphinxAtStartPar
Incomplete
&
\sphinxAtStartPar
Incomplete take\sphinxhyphen{}on
\\
\hline
\sphinxAtStartPar
Out
&
\sphinxAtStartPar
Ball went out
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


\subsubsection{Carry Event}
\label{\detokenize{Chap1/section1:carry-event}}
\sphinxAtStartPar
A class entitled “Carry Event” contains the following attributes:
\begin{itemize}
\item {} 
\sphinxAtStartPar
end timestamp

\item {} 
\sphinxAtStartPar
end coordinates \sphinxstylestrong{Point}

\item {} 
\sphinxAtStartPar
Result \sphinxstylestrong{Carry Result}

\end{itemize}


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|}
\hline
\sphinxstyletheadfamily 
\sphinxAtStartPar
Attribute
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Definition
\\
\hline
\sphinxAtStartPar
Complete
&
\sphinxAtStartPar
Complete carry
\\
\hline
\sphinxAtStartPar
Incomplete
&
\sphinxAtStartPar
Incomplete carry
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


\subsubsection{Substitution Event}
\label{\detokenize{Chap1/section1:substitution-event}}
\sphinxAtStartPar
A class entitled “Substitution Event” contains as attribute:
\begin{itemize}
\item {} 
\sphinxAtStartPar
replacement player \sphinxstylestrong{Player}

\end{itemize}


\subsubsection{Player On/Off Event}
\label{\detokenize{Chap1/section1:player-on-off-event}}
\sphinxAtStartPar
Two classes “PlayerOn Event” \& “PlayerOff Event” that contains as attribute:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Event type that the player is concerned on/off

\end{itemize}


\subsubsection{Card Event}
\label{\detokenize{Chap1/section1:card-event}}
\sphinxAtStartPar
A class named “Card Event”, it contains as attribute:
\begin{itemize}
\item {} 
\sphinxAtStartPar
card type \sphinxstylestrong{Card Type}

\end{itemize}


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|}
\hline
\sphinxstyletheadfamily 
\sphinxAtStartPar
Attribute
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Definition
\\
\hline
\sphinxAtStartPar
FIRST\_YELLOW
&
\sphinxAtStartPar
First yellow card
\\
\hline
\sphinxAtStartPar
SECOND\_YELLOW
&
\sphinxAtStartPar
Second yellow card
\\
\hline
\sphinxAtStartPar
RED
&
\sphinxAtStartPar
Red card
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


\subsubsection{Recovery Event}
\label{\detokenize{Chap1/section1:recovery-event}}
\sphinxAtStartPar
A class named “Recovery Event”, it contains as attribute:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Event type \sphinxstylestrong{Recovery}

\end{itemize}


\subsubsection{Ball out Event}
\label{\detokenize{Chap1/section1:ball-out-event}}
\sphinxAtStartPar
A class named “Ball out Event”, it contains as attribute:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Event type \sphinxstylestrong{Ball out}

\end{itemize}


\subsubsection{Foul Commit Event}
\label{\detokenize{Chap1/section1:foul-commit-event}}
\sphinxAtStartPar
A class named “Foul Commit Event”, it contains as attribute:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Event type \sphinxstylestrong{Foul Commit}

\end{itemize}


\subsubsection{Generic Event}
\label{\detokenize{Chap1/section1:generic-event}}
\sphinxAtStartPar
Kloppy classifies an event which does not match the above mentioned events (Unrecognised event type) as a generic event.


\subsection{Kloppy qualifiers}
\label{\detokenize{Chap1/section1:kloppy-qualifiers}}
\sphinxAtStartPar
Each type of event will be qualified with one or more of the following qualifiers.


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|}
\hline
\sphinxstyletheadfamily 
\sphinxAtStartPar
Qualifiers
&
\sphinxAtStartPar

\\
\hline
\sphinxAtStartPar
Set Piece
&
\sphinxAtStartPar
Corner / FreeKick / Penalty /Throw in /KickOff
\\
\hline
\sphinxAtStartPar
Body Part
&
\sphinxAtStartPar
Chest / Right Foot / Left Foot / Head
\\
\hline
\sphinxAtStartPar
Pass Type
&
\sphinxAtStartPar
Cross / LongBall /ThroughBall / Launch / ChippedBall / Assist / 2nd Assist /SwitchOfPlay
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


\subsection{Dependencies}
\label{\detokenize{Chap1/section1:dependencies}}
\sphinxAtStartPar
Python libraries that Kloppy depend on
\begin{description}
\item[{Black :}] \leavevmode
\sphinxAtStartPar
Black is the uncompromising Python code formatter. By using it, you agree to cede control over minutiae of hand\sphinxhyphen{}formatting. In return, Black gives you speed, determinism, and freedom from pycodestyle nagging about formatting.
Black makes code review faster by producing the smallest diffs possible.

\item[{Lxml :}] \leavevmode
\sphinxAtStartPar
The lxml XML toolkit is a Pythonic binding for the C libraries libxml2 and libxslt. It is unique in that it combines the speed and XML feature completeness of these libraries with the simplicity of a native Python API, mostly compatible but superior to the well\sphinxhyphen{}known ElementTree API.

\item[{Requests :}] \leavevmode
\sphinxAtStartPar
Python module that you can use to send all kinds of HTTP requests. It is an easy\sphinxhyphen{}to\sphinxhyphen{}use library with a lot of features ranging from passing parameters in URLs to sending custom headers and SSL Verification.

\item[{NetworkX :}] \leavevmode
\sphinxAtStartPar
This python package is used for the creation, manipulation, and study of the structure, dynamics, and functions of complex networks. It is used to study large complex networks represented in form of graphs with nodes and edges. Using networkx we can load and store complex networks.

\item[{PyTest :}] \leavevmode
\sphinxAtStartPar
PyTest is a testing framework that allows users to write test codes using Python programming language. It helps you to write simple and scalable test cases for databases, APIs, or UI. PyTest is mainly used for writing tests for APIs. It helps to write tests from simple unit tests to complex functional tests.

\item[{Pandas :}] \leavevmode
\sphinxAtStartPar
pandas is a Python package providing fast, flexible, and expressive data structures designed to make working with “relational” or “labeled” data both easy and intuitive. It aims to be the fundamental high\sphinxhyphen{}level building block for doing practical, real\sphinxhyphen{}world data analysis in Python.

\item[{Pre\sphinxhyphen{}commit :}] \leavevmode
\sphinxAtStartPar
A framework for managing and maintaining multi\sphinxhyphen{}language pre\sphinxhyphen{}commit Git hooks.

\end{description}


\section{The InStat Provider}
\label{\detokenize{Chap1/section2:the-instat-provider}}\label{\detokenize{Chap1/section2::doc}}

\subsection{What is InStat ?}
\label{\detokenize{Chap1/section2:what-is-instat}}
\sphinxAtStartPar
InStat is a worldwide sports performance analysis company, it prepares statistics for pre\sphinxhyphen{}game analysis, collects data during games and breaks down the game after it is completed.


\subsection{InStat Files}
\label{\detokenize{Chap1/section2:instat-files}}
\sphinxAtStartPar
As we mentionned before we will analyze the line\sphinxhyphen{}up \& events file.


\subsubsection{Line\sphinxhyphen{}up}
\label{\detokenize{Chap1/section2:line-up}}
\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics{{lineupxml}.png}
\caption{This a sample of the lineup XML file}\label{\detokenize{Chap1/section2:lineupfile-fig}}\end{figure}


\subsubsection{Events}
\label{\detokenize{Chap1/section2:events}}
\sphinxAtStartPar
Each row is considered an event that occurred within the match, every action has the following characteristics: time, type of action , place on the pitch, the player who committed it, the opponent (in the case of challenges).

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics{{eventsxml}.png}
\caption{This a sample of the events XML file}\label{\detokenize{Chap1/section2:id1}}\end{figure}


\subsection{InStat Actions}
\label{\detokenize{Chap1/section2:instat-actions}}
\sphinxAtStartPar
InStat has a specific way of structuring events as well as its type of action, each action has a specefic identifier .


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|}
\hline
\sphinxstyletheadfamily 
\sphinxAtStartPar
GENERIC ACTION
&\sphinxstyletheadfamily 
\sphinxAtStartPar
ACTION
\\
\hline
\sphinxAtStartPar
Pass
&
\sphinxAtStartPar
Attacking pass \sphinxhyphen{} Key pass \sphinxhyphen{} Assist \sphinxhyphen{} Key Assit
\\
\hline
\sphinxAtStartPar
Challenge
&
\sphinxAtStartPar
Challenge \sphinxhyphen{} Air challenge \sphinxhyphen{} Tackle \sphinxhyphen{} Dribble
\\
\hline
\sphinxAtStartPar
Disipline
&
\sphinxAtStartPar
Yellow card \sphinxhyphen{} Red card \sphinxhyphen{} RC for 2 YC
\\
\hline
\sphinxAtStartPar
Shot
&
\sphinxAtStartPar
Shot on target \sphinxhyphen{} Shot into the bar \sphinxhyphen{} Shot blocked
\\
\hline
\sphinxAtStartPar
Set Piece
&
\sphinxAtStartPar
Open play \sphinxhyphen{} Throw\sphinxhyphen{}in \sphinxhyphen{} Free\sphinxhyphen{}Kick \sphinxhyphen{} Corner
\\
\hline
\sphinxAtStartPar
Goal
&
\sphinxAtStartPar
Goal \sphinxhyphen{} Own goal
\\
\hline
\sphinxAtStartPar
Cross
&
\sphinxAtStartPar
Cross accurate \sphinxhyphen{} cross accurate
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


\subsection{InStat Coordinates System}
\label{\detokenize{Chap1/section2:instat-coordinates-system}}
\sphinxAtStartPar
The Coordinates system is X,Y coordinates of the player on the pitch , it refers to his position.
The origin of the coordinates is in the bottom left and the vertical orientation is from bottom to top of the pitch. The dimension of the picth is 105 * 68 .

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics{{pitch}.png}
\caption{InStat pitch representation.}\label{\detokenize{Chap1/section2:pitch-fig}}\end{figure}


\subsection{InStat Standart}
\label{\detokenize{Chap1/section2:instat-standart}}
\sphinxAtStartPar
Every event is qualified with a standart name as the following table shows.


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|}
\hline
\sphinxstyletheadfamily 
\sphinxAtStartPar
Standart name
\\
\hline
\sphinxAtStartPar
Open Play
\\
\hline
\sphinxAtStartPar
Throw\sphinxhyphen{}in
\\
\hline
\sphinxAtStartPar
Indirect Freekick
\\
\hline
\sphinxAtStartPar
Direct free kick
\\
\hline
\sphinxAtStartPar
Corner
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


\subsection{InStat Body Part}
\label{\detokenize{Chap1/section2:instat-body-part}}
\sphinxAtStartPar
Every event is qualified with a Body name that reffers to the body part as the following table shows.


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|}
\hline
\sphinxstyletheadfamily 
\sphinxAtStartPar
Body name
\\
\hline
\sphinxAtStartPar
Right foot
\\
\hline
\sphinxAtStartPar
Left foot
\\
\hline
\sphinxAtStartPar
Header
\\
\hline
\sphinxAtStartPar
Hand
\\
\hline
\sphinxAtStartPar
Other body part
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


\section{Workflow}
\label{\detokenize{Chap1/section3:workflow}}\label{\detokenize{Chap1/section3::doc}}
\sphinxAtStartPar
In this section, we will describe in detail the approach adopted.


\subsection{Instat Inputs}
\label{\detokenize{Chap1/section3:instat-inputs}}
\sphinxAtStartPar
Every provider in Kloppy has an input class that contains the files that will be used. We created the InStatInputs class which has as attributes the file line\sphinxhyphen{}up and events as the following code states.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{class} \PYG{n+nc}{InStatInputs}\PYG{p}{(}\PYG{n}{NamedTuple}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{lineup\PYGZus{}data}\PYG{p}{:} \PYG{n}{IO}\PYG{p}{[}\PYG{n+nb}{bytes}\PYG{p}{]}
    \PYG{n}{events\PYGZus{}data}\PYG{p}{:} \PYG{n}{IO}\PYG{p}{[}\PYG{n+nb}{bytes}\PYG{p}{]}
\end{sphinxVerbatim}


\subsection{Coordinates System}
\label{\detokenize{Chap1/section3:coordinates-system}}
\sphinxAtStartPar
Each provider has its own coordinate system, so we defined a data class that that specifies the pitch parameters.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nd}{@dataclass}
\PYG{k}{class} \PYG{n+nc}{InstatCoordinateSystem}\PYG{p}{(}\PYG{n}{CoordinateSystem}\PYG{p}{)}\PYG{p}{:}
    \PYG{n+nd}{@property}
    \PYG{k}{def} \PYG{n+nf}{provider}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n}{Provider}\PYG{p}{:}
        \PYG{k}{return} \PYG{n}{Provider}\PYG{o}{.}\PYG{n}{INSTAT}

    \PYG{n+nd}{@property}
    \PYG{k}{def} \PYG{n+nf}{origin}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n}{Origin}\PYG{p}{:}
        \PYG{k}{return} \PYG{n}{Origin}\PYG{o}{.}\PYG{n}{BOTTOM\PYGZus{}LEFT} 

    \PYG{n+nd}{@property}
    \PYG{k}{def} \PYG{n+nf}{vertical\PYGZus{}orientation}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n}{VerticalOrientation}\PYG{p}{:}
        \PYG{k}{return} \PYG{n}{VerticalOrientation}\PYG{o}{.}\PYG{n}{BOTTOM\PYGZus{}TO\PYGZus{}TOP}

    \PYG{n+nd}{@property}
    \PYG{k}{def} \PYG{n+nf}{pitch\PYGZus{}dimensions}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n}{PitchDimensions}\PYG{p}{:}
        \PYG{k}{return} \PYG{n}{PitchDimensions}\PYG{p}{(}
            \PYG{n}{x\PYGZus{}dim}\PYG{o}{=}\PYG{n}{Dimension}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{105}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{y\PYGZus{}dim}\PYG{o}{=}\PYG{n}{Dimension}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{68}\PYG{p}{)}\PYG{p}{,}
        \PYG{p}{)}
\end{sphinxVerbatim}


\subsection{Action Id}
\label{\detokenize{Chap1/section3:action-id}}
\sphinxAtStartPar
In this section, we will try to match the types of InStat events and actions to Kloppy classes in order to proceed with the deserialization process.
We have created a file called “InStat Events” that contains all types of events with their identifiers.
This is a sample of the code.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}BALL\PYGZus{}OUT} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{27000}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}CORNER\PYGZus{}AWARDED} \PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{5060}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{BALL\PYGZus{}OUT\PYGZus{}EVENTS} \PYG{o}{=} \PYG{p}{[}\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}BALL\PYGZus{}OUT}\PYG{p}{,} \PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}CORNER\PYGZus{}AWARDED}\PYG{p}{]}

\PYG{n}{EVENT\PYGZus{}BODYPART\PYGZus{}RIGHT\PYGZus{}FOOT} \PYG{o}{=} \PYG{l+m+mi}{1}
\PYG{n}{EVENT\PYGZus{}BODYPART\PYGZus{}LEFT\PYGZus{}FOOT} \PYG{o}{=} \PYG{l+m+mi}{2}
\PYG{n}{EVENT\PYGZus{}BODYPART\PYGZus{}HEADER} \PYG{o}{=} \PYG{l+m+mi}{3}
\PYG{n}{EVENT\PYGZus{}BODYPART\PYGZus{}BODY} \PYG{o}{=} \PYG{l+m+mi}{4}
\PYG{n}{EVENT\PYGZus{}BODYPART\PYGZus{}HAND} \PYG{o}{=} \PYG{l+m+mi}{5}

\PYG{n}{SET\PYGZus{}PIECE\PYGZus{}THROW\PYGZus{}IN} \PYG{o}{=} \PYG{l+m+mi}{2}
\PYG{n}{SET\PYGZus{}PIECE\PYGZus{}INDIRECT\PYGZus{}FREE\PYGZus{}KICK} \PYG{o}{=} \PYG{l+m+mi}{3}
\PYG{n}{SET\PYGZus{}PIECE\PYGZus{}DIRECT\PYGZus{}FREE\PYGZus{}KICK} \PYG{o}{=} \PYG{l+m+mi}{4}
\PYG{n}{SET\PYGZus{}PIECE\PYGZus{}CORNER} \PYG{o}{=} \PYG{l+m+mi}{5}

\end{sphinxVerbatim}


\subsection{Qualifiers Functions}
\label{\detokenize{Chap1/section3:qualifiers-functions}}
\sphinxAtStartPar
Qualifiers describe each single event with one or more of these following qualifiers (Body part, Card, Set piece and Pass).


\subsubsection{Body Part Qualifier}
\label{\detokenize{Chap1/section3:body-part-qualifier}}
\sphinxAtStartPar
This qualifier function returns which body part is used with each event.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{\PYGZus{}get\PYGZus{}event\PYGZus{}bodypart}\PYG{p}{(}\PYG{n}{body\PYGZus{}id} \PYG{p}{:} \PYG{n+nb}{int}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n}{List}\PYG{p}{[}\PYG{n}{Qualifier}\PYG{p}{]}\PYG{p}{:}
    \PYG{n}{qualifiers} \PYG{o}{=}  \PYG{p}{[}\PYG{p}{]}
    \PYG{k}{if} \PYG{n}{body\PYGZus{}id} \PYG{o}{==} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}BODYPART\PYGZus{}RIGHT\PYGZus{}FOOT}\PYG{p}{:}
        \PYG{n}{qualifiers}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{BodyPartQualifier}\PYG{p}{(}\PYG{n}{value}\PYG{o}{=}\PYG{n}{BodyPart}\PYG{o}{.}\PYG{n}{RIGHT\PYGZus{}FOOT}\PYG{p}{)}\PYG{p}{)}
    \PYG{k}{elif} \PYG{n}{body\PYGZus{}id} \PYG{o}{==} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}BODYPART\PYGZus{}LEFT\PYGZus{}FOOT}\PYG{p}{:}
        \PYG{n}{qualifiers}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{BodyPartQualifier}\PYG{p}{(}\PYG{n}{value}\PYG{o}{=}\PYG{n}{BodyPart}\PYG{o}{.}\PYG{n}{LEFT\PYGZus{}FOOT}\PYG{p}{)}\PYG{p}{)}
    \PYG{k}{elif} \PYG{n}{body\PYGZus{}id} \PYG{o}{==} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}BODYPART\PYGZus{}HEADER}\PYG{p}{:}
        \PYG{n}{qualifiers}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{BodyPartQualifier}\PYG{p}{(}\PYG{n}{value}\PYG{o}{=}\PYG{n}{BodyPart}\PYG{o}{.}\PYG{n}{HEAD}\PYG{p}{)}\PYG{p}{)}
    \PYG{k}{elif} \PYG{n}{body\PYGZus{}id} \PYG{o}{==} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}BODYPART\PYGZus{}BODY} \PYG{p}{:}
        \PYG{n}{qualifiers}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{BodyPartQualifier}\PYG{p}{(}\PYG{n}{value}\PYG{o}{=}\PYG{n}{BodyPart}\PYG{o}{.}\PYG{n}{OTHER}\PYG{p}{)}\PYG{p}{)}
    \PYG{k}{elif} \PYG{n}{body\PYGZus{}id} \PYG{o}{==} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}BODYPART\PYGZus{}HAND} \PYG{p}{:}
        \PYG{n}{qualifiers}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{BodyPartQualifier}\PYG{p}{(}\PYG{n}{value}\PYG{o}{=}\PYG{n}{BodyPart}\PYG{o}{.}\PYG{n}{OTHER}\PYG{p}{)}\PYG{p}{)}
    
    \PYG{k}{return} \PYG{n}{qualifiers}
\end{sphinxVerbatim}


\subsubsection{Card Qualifier}
\label{\detokenize{Chap1/section3:card-qualifier}}
\sphinxAtStartPar
This qualifier function returns which card type is used with each card event.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{\PYGZus{}get\PYGZus{}event\PYGZus{}card}\PYG{p}{(}\PYG{n}{action\PYGZus{}id} \PYG{p}{:} \PYG{n+nb}{str}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n}{List}\PYG{p}{[}\PYG{n}{Qualifier}\PYG{p}{]}\PYG{p}{:}
    \PYG{n}{qualifiers} \PYG{o}{=}  \PYG{p}{[}\PYG{p}{]}
    \PYG{k}{if} \PYG{n}{action\PYGZus{}id} \PYG{o}{==} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}RED\PYGZus{}CARD}\PYG{p}{:}
        \PYG{n}{qualifiers}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{CardQualifier}\PYG{p}{(}\PYG{n}{value}\PYG{o}{=}\PYG{n}{CardType}\PYG{o}{.}\PYG{n}{RED}\PYG{p}{)}\PYG{p}{)}
    \PYG{k}{elif} \PYG{n}{action\PYGZus{}id} \PYG{o}{==} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}SECOND\PYGZus{}YELLOW\PYGZus{}CARD}\PYG{p}{:}
        \PYG{n}{qualifiers}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{CardQualifier}\PYG{p}{(}\PYG{n}{value}\PYG{o}{=}\PYG{n}{CardType}\PYG{o}{.}\PYG{n}{SECOND\PYGZus{}YELLOW}\PYG{p}{)}\PYG{p}{)}
    \PYG{k}{elif} \PYG{n}{action\PYGZus{}id} \PYG{o}{==} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}FIRST\PYGZus{}YELLOW\PYGZus{}CARD}\PYG{p}{:}
        \PYG{n}{qualifiers}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{CardQualifier}\PYG{p}{(}\PYG{n}{value}\PYG{o}{=}\PYG{n}{CardType}\PYG{o}{.}\PYG{n}{FIRST\PYGZus{}YELLOW}\PYG{p}{)}\PYG{p}{)}
    \PYG{k}{return} \PYG{n}{qualifiers}
\end{sphinxVerbatim}


\subsubsection{Pass Qualifier}
\label{\detokenize{Chap1/section3:pass-qualifier}}
\sphinxAtStartPar
This qualifier function returns the type of the pass concerned with each pass event.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{\PYGZus{}get\PYGZus{}event\PYGZus{}pass}\PYG{p}{(}\PYG{n}{action\PYGZus{}id} \PYG{p}{:} \PYG{n+nb}{str}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n}{List}\PYG{p}{[}\PYG{n}{Qualifier}\PYG{p}{]}\PYG{p}{:}
    \PYG{n}{qualifiers} \PYG{o}{=}  \PYG{p}{[}\PYG{p}{]}
    \PYG{k}{if} \PYG{n}{action\PYGZus{}id} \PYG{o+ow}{in} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}CROSS}\PYG{p}{:}
        \PYG{n}{qualifiers}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{PassQualifier}\PYG{p}{(}\PYG{n}{value}\PYG{o}{=}\PYG{n}{PassType}\PYG{o}{.}\PYG{n}{CROSS}\PYG{p}{)}\PYG{p}{)}
    \PYG{k}{elif} \PYG{n}{action\PYGZus{}id} \PYG{o+ow}{in} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}ASSIST}\PYG{p}{:}
        \PYG{n}{qualifiers}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{PassQualifier}\PYG{p}{(}\PYG{n}{value}\PYG{o}{=}\PYG{n}{PassType}\PYG{o}{.}\PYG{n}{ASSIST}\PYG{p}{)}\PYG{p}{)}
    \PYG{k}{elif} \PYG{n}{action\PYGZus{}id} \PYG{o+ow}{in} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}ASSISIT\PYGZus{}2ND}\PYG{p}{:}
        \PYG{n}{qualifiers}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{PassQualifier}\PYG{p}{(}\PYG{n}{value}\PYG{o}{=}\PYG{n}{PassType}\PYG{o}{.}\PYG{n}{ASSIST\PYGZus{}2ND}\PYG{p}{)}\PYG{p}{)}
    \PYG{k}{return} \PYG{n}{qualifiers}
\end{sphinxVerbatim}


\subsubsection{Set Piece Qualifier}
\label{\detokenize{Chap1/section3:set-piece-qualifier}}
\sphinxAtStartPar
As we mentioned previously, the equivalent of set piece in Instat is \sphinxstylestrong{standart}.
This qualifier function returns the type of the set piece concerned with each event.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{\PYGZus{}get\PYGZus{}event\PYGZus{}setpiece}\PYG{p}{(}\PYG{n}{standart\PYGZus{}id}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n}{List}\PYG{p}{[}\PYG{n}{Qualifier}\PYG{p}{]}\PYG{p}{:}
    \PYG{n}{qualifiers} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
    \PYG{k}{if} \PYG{n}{standart\PYGZus{}id} \PYG{o}{==} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{SET\PYGZus{}PIECE\PYGZus{}CORNER}\PYG{p}{:}
        \PYG{n}{qualifiers}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{SetPieceQualifier}\PYG{p}{(}\PYG{n}{value}\PYG{o}{=}\PYG{n}{SetPieceType}\PYG{o}{.}\PYG{n}{CORNER\PYGZus{}KICK}\PYG{p}{)}\PYG{p}{)}
    \PYG{k}{elif} \PYG{n}{standart\PYGZus{}id} \PYG{o}{==} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{SET\PYGZus{}PIECE\PYGZus{}DIRECT\PYGZus{}FREE\PYGZus{}KICK}\PYG{p}{:}
        \PYG{n}{qualifiers}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{SetPieceQualifier}\PYG{p}{(}\PYG{n}{value}\PYG{o}{=}\PYG{n}{SetPieceType}\PYG{o}{.}\PYG{n}{FREE\PYGZus{}KICK}\PYG{p}{)}\PYG{p}{)}
    \PYG{k}{elif} \PYG{n}{standart\PYGZus{}id} \PYG{o}{==} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{SET\PYGZus{}PIECE\PYGZus{}INDIRECT\PYGZus{}FREE\PYGZus{}KICK}\PYG{p}{:}
        \PYG{n}{qualifiers}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{SetPieceQualifier}\PYG{p}{(}\PYG{n}{value}\PYG{o}{=}\PYG{n}{SetPieceType}\PYG{o}{.}\PYG{n}{FREE\PYGZus{}KICK}\PYG{p}{)}\PYG{p}{)}
    \PYG{k}{elif} \PYG{n}{standart\PYGZus{}id} \PYG{o}{==} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{SET\PYGZus{}PIECE\PYGZus{}THROW\PYGZus{}IN}\PYG{p}{:}
        \PYG{n}{qualifiers}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{SetPieceQualifier}\PYG{p}{(}\PYG{n}{value}\PYG{o}{=}\PYG{n}{SetPieceType}\PYG{o}{.}\PYG{n}{THROW\PYGZus{}IN}\PYG{p}{)}\PYG{p}{)}
    \PYG{k}{return} \PYG{n}{qualifiers}
\end{sphinxVerbatim}


\subsection{Parse Functions}
\label{\detokenize{Chap1/section3:parse-functions}}
\sphinxAtStartPar
The parse functions are used to retrieve data from the file to specific classes set by kloppy.
This is where de\sphinxhyphen{}serialization takes its parts and transforms the data extracted from the XML file into the classes identified by KLoppy.
As stated in the preceding chapter, Qualifier describes each event type with the correspondents qualifiers.


\subsubsection{Parse Team}
\label{\detokenize{Chap1/section3:parse-team}}
\sphinxAtStartPar
This function identifies the team (id, name, ground, team side and starting formation) \& players of the team (player id, team, jersey number, first name, last name, starting, position) as the following code shows.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{\PYGZus{}parse\PYGZus{}team}\PYG{p}{(}\PYG{n}{team\PYGZus{}root} \PYG{p}{,} \PYG{n}{team\PYGZus{}side}
                \PYG{p}{)}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n}{Team}\PYG{p}{:}
    \PYG{n}{team\PYGZus{}id} \PYG{o}{=} \PYG{n}{team\PYGZus{}root}\PYG{o}{.}\PYG{n}{attrib}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{id}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
    \PYG{n}{formation} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZhy{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{.}\PYG{n}{join}\PYG{p}{(}\PYG{n}{re}\PYG{o}{.}\PYG{n}{findall}\PYG{p}{(}\PYG{l+s+sa}{r}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZbs{}}\PYG{l+s+s1}{d+}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{team\PYGZus{}root}\PYG{o}{.}\PYG{n}{lineup}\PYG{o}{.}\PYG{n}{main}\PYG{o}{.}\PYG{n}{attrib}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{starting\PYGZus{}tactic}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{)}\PYG{p}{)}
    \PYG{n}{team} \PYG{o}{=} \PYG{n}{Team}\PYG{p}{(}
        \PYG{n}{team\PYGZus{}id}\PYG{o}{=}\PYG{n+nb}{str}\PYG{p}{(}\PYG{n}{team\PYGZus{}id}\PYG{p}{)}\PYG{p}{,}
        \PYG{n}{name}\PYG{o}{=}\PYG{n}{team\PYGZus{}root}\PYG{o}{.}\PYG{n}{attrib}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{,}
        \PYG{n}{ground}\PYG{o}{=}\PYG{n}{Ground}\PYG{o}{.}\PYG{n}{HOME}
        \PYG{k}{if} \PYG{n+nb}{str}\PYG{p}{(}\PYG{n}{team\PYGZus{}side}\PYG{p}{)} \PYG{o}{==} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{first\PYGZus{}team}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{k}{else} \PYG{n}{Ground}\PYG{o}{.}\PYG{n}{AWAY}\PYG{p}{,}
        \PYG{n}{starting\PYGZus{}formation}\PYG{o}{=}\PYG{n}{FormationType}\PYG{p}{(}\PYG{n}{formation}\PYG{p}{)}\PYG{p}{,}
    \PYG{p}{)}
    \PYG{n}{team}\PYG{o}{.}\PYG{n}{players} \PYG{o}{=} \PYG{p}{[}
        \PYG{n}{Player}\PYG{p}{(}
            \PYG{n}{player\PYGZus{}id}\PYG{o}{=}\PYG{n}{player\PYGZus{}elm}\PYG{o}{.}\PYG{n}{attrib}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{id}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{,}
            \PYG{n}{team}\PYG{o}{=}\PYG{n}{team}\PYG{p}{,}
            \PYG{n}{jersey\PYGZus{}no}\PYG{o}{=}\PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{player\PYGZus{}elm}\PYG{o}{.}\PYG{n}{attrib}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{num}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{first\PYGZus{}name}\PYG{o}{=}\PYG{n}{player\PYGZus{}elm}\PYG{o}{.}\PYG{n}{attrib}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{firstname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{,}
            \PYG{n}{last\PYGZus{}name}\PYG{o}{=}\PYG{n}{player\PYGZus{}elm}\PYG{o}{.}\PYG{n}{attrib}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{lastname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{,}
            \PYG{n}{starting}\PYG{o}{=}\PYG{k+kc}{True} \PYG{k}{if} \PYG{n}{player\PYGZus{}elm}\PYG{o}{.}\PYG{n}{attrib}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{starting\PYGZus{}lineup}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{==} \PYG{l+m+mi}{1} \PYG{k}{else} \PYG{k+kc}{False}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{n}{Position}\PYG{p}{(}
                \PYG{n}{position\PYGZus{}id}\PYG{o}{=}\PYG{n}{player\PYGZus{}elm}\PYG{o}{.}\PYG{n}{attrib}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{starting\PYGZus{}position\PYGZus{}id}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{,}
                \PYG{n}{name}\PYG{o}{=}\PYG{n}{player\PYGZus{}elm}\PYG{o}{.}\PYG{n}{attrib}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{starting\PYGZus{}position\PYGZus{}name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{,}
                \PYG{n}{coordinates}\PYG{o}{=}\PYG{k+kc}{None}\PYG{p}{,}
            \PYG{p}{)}\PYG{p}{,}
        \PYG{p}{)}
        \PYG{k}{for} \PYG{n}{player\PYGZus{}elm} \PYG{o+ow}{in} \PYG{n}{team\PYGZus{}root}\PYG{o}{.}\PYG{n}{lineup}\PYG{o}{.}\PYG{n}{main}\PYG{o}{.}\PYG{n}{iterchildren}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{player}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{p}{]}
    \PYG{k}{return} \PYG{n}{team} \PYG{p}{,} \PYG{n}{team\PYGZus{}id}
\end{sphinxVerbatim}


\subsubsection{Parse Score}
\label{\detokenize{Chap1/section3:parse-score}}
\sphinxAtStartPar
This function returns the score of both teams, the home and away team.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{\PYGZus{}parse\PYGZus{}score} \PYG{p}{(}\PYG{n}{events\PYGZus{}root}\PYG{p}{,}\PYG{n}{home\PYGZus{}team\PYGZus{}id}\PYG{p}{,}\PYG{n}{away\PYGZus{}team\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
    
    \PYG{n}{home\PYGZus{}score} \PYG{o}{=} \PYG{l+m+mi}{0}
    \PYG{n}{away\PYGZus{}score} \PYG{o}{=} \PYG{l+m+mi}{0}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{k}{for} \PYG{n}{event} \PYG{o+ow}{in} \PYG{n}{events\PYGZus{}root}\PYG{o}{.}\PYG{n}{iterchildren}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{row}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{:}
            \PYG{k}{if} \PYG{n}{event}\PYG{o}{.}\PYG{n}{attrib}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{action\PYGZus{}id}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{o}{==}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{8010}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o+ow}{and} \PYG{n}{event}\PYG{o}{.}\PYG{n}{attrib}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{team\PYGZus{}id}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{o}{==}\PYG{n+nb}{str}\PYG{p}{(}\PYG{n}{home\PYGZus{}team\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
                \PYG{n}{home\PYGZus{}score} \PYG{o}{+}\PYG{o}{=}\PYG{l+m+mi}{1}
            \PYG{k}{elif} \PYG{n}{event}\PYG{o}{.}\PYG{n}{attrib}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{action\PYGZus{}id}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{o}{==}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{8010}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o+ow}{and} \PYG{n}{event}\PYG{o}{.}\PYG{n}{attrib}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{team\PYGZus{}id}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{o}{==}\PYG{n+nb}{str}\PYG{p}{(}\PYG{n}{away\PYGZus{}team\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
                \PYG{n}{away\PYGZus{}score} \PYG{o}{+}\PYG{o}{=}\PYG{l+m+mi}{1}
    
    \PYG{k}{except} \PYG{n+ne}{KeyError}\PYG{p}{:}
        \PYG{k}{pass}
    \PYG{k}{return} \PYG{n}{home\PYGZus{}score}\PYG{p}{,}\PYG{n}{away\PYGZus{}score}
\end{sphinxVerbatim}


\subsubsection{Parse Card}
\label{\detokenize{Chap1/section3:parse-card}}
\sphinxAtStartPar
This function returns the type of the card.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{\PYGZus{}get\PYGZus{}event\PYGZus{}card}\PYG{p}{(}\PYG{n}{action\PYGZus{}id} \PYG{p}{:} \PYG{n+nb}{str}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n}{List}\PYG{p}{[}\PYG{n}{Qualifier}\PYG{p}{]}\PYG{p}{:}
    \PYG{n}{qualifiers} \PYG{o}{=}  \PYG{p}{[}\PYG{p}{]}
    \PYG{k}{if} \PYG{n}{action\PYGZus{}id} \PYG{o}{==} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}RED\PYGZus{}CARD}\PYG{p}{:}
        \PYG{n}{qualifiers}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{CardQualifier}\PYG{p}{(}\PYG{n}{value}\PYG{o}{=}\PYG{n}{CardType}\PYG{o}{.}\PYG{n}{RED}\PYG{p}{)}\PYG{p}{)}
    \PYG{k}{elif} \PYG{n}{action\PYGZus{}id} \PYG{o}{==} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}SECOND\PYGZus{}YELLOW\PYGZus{}CARD}\PYG{p}{:}
        \PYG{n}{qualifiers}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{CardQualifier}\PYG{p}{(}\PYG{n}{value}\PYG{o}{=}\PYG{n}{CardType}\PYG{o}{.}\PYG{n}{SECOND\PYGZus{}YELLOW}\PYG{p}{)}\PYG{p}{)}
    \PYG{k}{elif} \PYG{n}{action\PYGZus{}id} \PYG{o}{==} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}FIRST\PYGZus{}YELLOW\PYGZus{}CARD}\PYG{p}{:}
        \PYG{n}{qualifiers}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{CardQualifier}\PYG{p}{(}\PYG{n}{value}\PYG{o}{=}\PYG{n}{CardType}\PYG{o}{.}\PYG{n}{FIRST\PYGZus{}YELLOW}\PYG{p}{)}\PYG{p}{)}
    \PYG{k}{return} \PYG{n}{qualifiers}
\end{sphinxVerbatim}


\subsubsection{Parse pass}
\label{\detokenize{Chap1/section3:parse-pass}}
\sphinxAtStartPar
This function takes as an input a pass event and the action id, it returns the attributes used in the Pass Event class.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{\PYGZus{}parse\PYGZus{}pass}\PYG{p}{(}\PYG{n}{action\PYGZus{}id}\PYG{p}{:} \PYG{n+nb}{str}\PYG{p}{,} \PYG{n}{row\PYGZus{}elm}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n}{Dict}\PYG{p}{:}
    \PYG{k}{if} \PYG{n}{action\PYGZus{}id} \PYG{o+ow}{in} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}CROSS}\PYG{p}{:}
        \PYG{k}{if} \PYG{n}{action\PYGZus{}id} \PYG{o+ow}{in} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}CROSS\PYGZus{}INCOMPLETE}\PYG{p}{:}
            \PYG{n}{result} \PYG{o}{=} \PYG{n}{PassResult}\PYG{o}{.}\PYG{n}{INCOMPLETE}
        \PYG{k}{elif} \PYG{n}{action\PYGZus{}id} \PYG{o+ow}{in} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}CROSS\PYGZus{}COMPLETE}\PYG{p}{:}
            \PYG{n}{result} \PYG{o}{=} \PYG{n}{PassResult}\PYG{o}{.}\PYG{n}{COMPLETE}    
    \PYG{k}{elif} \PYG{n}{action\PYGZus{}id} \PYG{o+ow}{in} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}ASSIST}\PYG{p}{:}
        \PYG{n}{result} \PYG{o}{=} \PYG{n}{PassResult}\PYG{o}{.}\PYG{n}{COMPLETE}    
    \PYG{k}{elif} \PYG{n}{action\PYGZus{}id} \PYG{o+ow}{in} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}ASSISIT\PYGZus{}2ND}\PYG{p}{:}
        \PYG{n}{result} \PYG{o}{=} \PYG{n}{PassResult}\PYG{o}{.}\PYG{n}{COMPLETE}   
        
    \PYG{n}{receiver\PYGZus{}coordinates} \PYG{o}{=} \PYG{n}{Point}\PYG{p}{(}
            \PYG{n}{x}\PYG{o}{=}\PYG{n+nb}{float}\PYG{p}{(}\PYG{n}{row\PYGZus{}elm}\PYG{o}{.}\PYG{n}{attrib}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pos\PYGZus{}dest\PYGZus{}x}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{)}\PYG{p}{,} \PYG{n}{y}\PYG{o}{=}\PYG{n+nb}{float}\PYG{p}{(}\PYG{n}{row\PYGZus{}elm}\PYG{o}{.}\PYG{n}{attrib}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pos\PYGZus{}dest\PYGZus{}y}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{)}
        \PYG{p}{)}
    \PYG{n}{qualifiers} \PYG{o}{=} \PYG{n}{\PYGZus{}get\PYGZus{}event\PYGZus{}qualifiers}\PYG{p}{(}\PYG{n}{row\PYGZus{}elm}\PYG{p}{)}
    
    \PYG{k}{return} \PYG{n+nb}{dict}\PYG{p}{(}
        \PYG{n}{result}\PYG{o}{=}\PYG{n}{result}\PYG{p}{,}
        \PYG{n}{receiver\PYGZus{}coordinates}\PYG{o}{=}\PYG{n}{receiver\PYGZus{}coordinates}\PYG{p}{,}
        \PYG{n}{receiver\PYGZus{}player}\PYG{o}{=}\PYG{k+kc}{None}\PYG{p}{,}
        \PYG{n}{receive\PYGZus{}timestamp}\PYG{o}{=}\PYG{k+kc}{None}\PYG{p}{,}
        \PYG{n}{qualifiers}\PYG{o}{=}\PYG{n}{qualifiers}\PYG{p}{,}
    \PYG{p}{)}
\end{sphinxVerbatim}


\subsubsection{Parse shot}
\label{\detokenize{Chap1/section3:parse-shot}}
\sphinxAtStartPar
This function takes as an input a shot event, the action id, and the coordinates. It returns the attributes used in the Shot Event class.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{\PYGZus{}parse\PYGZus{}shot}\PYG{p}{(}
            \PYG{n}{action\PYGZus{}id}\PYG{p}{:} \PYG{n+nb}{str}\PYG{p}{,} 
            \PYG{n}{coordinates}\PYG{p}{:} \PYG{n}{Point}\PYG{p}{,} 
            \PYG{n}{row\PYGZus{}elm}
               \PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n}{Dict}\PYG{p}{:}
    \PYG{k}{if} \PYG{n}{action\PYGZus{}id} \PYG{o}{==} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}SHOT\PYGZus{}GOAL}\PYG{p}{:}
        \PYG{n}{result} \PYG{o}{=} \PYG{n}{ShotResult}\PYG{o}{.}\PYG{n}{GOAL}
    \PYG{k}{elif} \PYG{n}{action\PYGZus{}id} \PYG{o}{==} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}SHOT\PYGZus{}OWN\PYGZus{}GOAL}\PYG{p}{:}
        \PYG{n}{result} \PYG{o}{=} \PYG{n}{ShotResult}\PYG{o}{.}\PYG{n}{OWN\PYGZus{}GOAL}
    \PYG{k}{elif} \PYG{n}{action\PYGZus{}id} \PYG{o}{==} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}SHOT\PYGZus{}BLOCKED}\PYG{p}{:}
        \PYG{n}{result} \PYG{o}{=} \PYG{n}{ShotResult}\PYG{o}{.}\PYG{n}{BLOCKED}
    \PYG{k}{elif} \PYG{n}{action\PYGZus{}id} \PYG{o}{==} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}SHOT\PYGZus{}POST}\PYG{p}{:}
        \PYG{n}{result} \PYG{o}{=} \PYG{n}{ShotResult}\PYG{o}{.}\PYG{n}{POST}
    \PYG{k}{elif} \PYG{n}{action\PYGZus{}id} \PYG{o}{==} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}SHOT\PYGZus{}SAVED}\PYG{p}{:}
        \PYG{n}{result} \PYG{o}{=} \PYG{n}{ShotResult}\PYG{o}{.}\PYG{n}{SAVED}
    \PYG{k}{else}\PYG{p}{:}
        \PYG{n}{result} \PYG{o}{=} \PYG{k+kc}{None}
    \PYG{n}{qualifiers} \PYG{o}{=} \PYG{n}{\PYGZus{}get\PYGZus{}event\PYGZus{}qualifiers}\PYG{p}{(}\PYG{n}{row\PYGZus{}elm}\PYG{p}{)}
    \PYG{k}{return} \PYG{n+nb}{dict}\PYG{p}{(}
        \PYG{n}{coordinates}\PYG{o}{=}\PYG{n}{coordinates}\PYG{p}{,} 
        \PYG{n}{result}\PYG{o}{=}\PYG{n}{result}\PYG{p}{,}
        \PYG{n}{qualifiers}\PYG{o}{=}\PYG{n}{qualifiers}\PYG{p}{)}
\end{sphinxVerbatim}


\subsubsection{Parse take\sphinxhyphen{}on}
\label{\detokenize{Chap1/section3:parse-take-on}}
\sphinxAtStartPar
This function takes as an input the action id and it returns the result of the take on.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{\PYGZus{}parse\PYGZus{}take\PYGZus{}on}\PYG{p}{(}\PYG{n}{action\PYGZus{}id}\PYG{p}{:} \PYG{n+nb}{str}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n}{Dict}\PYG{p}{:}
    \PYG{k}{if} \PYG{n}{action\PYGZus{}id} \PYG{o+ow}{in} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}TAKE\PYGZus{}ON\PYGZus{}COMPLETE}\PYG{p}{:}
        \PYG{n}{result} \PYG{o}{=} \PYG{n}{TakeOnResult}\PYG{o}{.}\PYG{n}{COMPLETE}
    \PYG{k}{elif} \PYG{n}{action\PYGZus{}id} \PYG{o}{==} \PYG{n}{instat\PYGZus{}events}\PYG{o}{.}\PYG{n}{EVENT\PYGZus{}TYPE\PYGZus{}TAKE\PYGZus{}ON\PYGZus{}INSUCC\PYGZus{}DRIBBLING}\PYG{p}{:}
        \PYG{n}{result} \PYG{o}{=} \PYG{n}{TakeOnResult}\PYG{o}{.}\PYG{n}{INCOMPLETE}
    \PYG{k}{return} \PYG{n+nb}{dict}\PYG{p}{(}\PYG{n}{result}\PYG{o}{=}\PYG{n}{result}\PYG{p}{)}
\end{sphinxVerbatim}


\subsection{InStat Deserializer}
\label{\detokenize{Chap1/section3:instat-deserializer}}
\sphinxAtStartPar
It is the final class that includes all previous sections and will return the final Dataset after the de\sphinxhyphen{}serialization process took part.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{return} \PYG{n}{EventDataset}\PYG{p}{(}
            \PYG{n}{metadata}\PYG{o}{=}\PYG{n}{metadata}\PYG{p}{,}
            \PYG{n}{records}\PYG{o}{=}\PYG{n}{events}\PYG{p}{,}
        \PYG{p}{)}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{EventDataset} is a data class that contains the metadata \& records of the game.


\subsubsection{Metadata}
\label{\detokenize{Chap1/section3:metadata}}
\sphinxAtStartPar
The Metadata contains both team (home \& away team), Period (timestamp of the first \& second half), Score of the game, coordiantes system of Instat .

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{metadata} \PYG{o}{=} \PYG{n}{Metadata}\PYG{p}{(}
            \PYG{n}{teams}\PYG{o}{=}\PYG{n}{teams}\PYG{p}{,}
            \PYG{n}{periods}\PYG{o}{=}\PYG{n}{periods}\PYG{p}{,}
            \PYG{n}{pitch\PYGZus{}dimensions}\PYG{o}{=}\PYG{n}{transformer}\PYG{o}{.}\PYG{n}{get\PYGZus{}to\PYGZus{}coordinate\PYGZus{}system}\PYG{p}{(}\PYG{p}{)}\PYG{o}{.}\PYG{n}{pitch\PYGZus{}dimensions}\PYG{p}{,}
            \PYG{n}{score}\PYG{o}{=}\PYG{n}{score}\PYG{p}{,}
            \PYG{n}{frame\PYGZus{}rate}\PYG{o}{=}\PYG{k+kc}{None}\PYG{p}{,}
            \PYG{n}{orientation}\PYG{o}{=}\PYG{n}{Orientation}\PYG{o}{.}\PYG{n}{ACTION\PYGZus{}EXECUTING\PYGZus{}TEAM}\PYG{p}{,}
            \PYG{n}{flags}\PYG{o}{=}\PYG{n}{DatasetFlag}\PYG{o}{.}\PYG{n}{BALL\PYGZus{}OWNING\PYGZus{}TEAM}\PYG{p}{,}
            \PYG{n}{provider}\PYG{o}{=}\PYG{n}{Provider}\PYG{o}{.}\PYG{n}{INSTAT}\PYG{p}{,}
            \PYG{n}{coordinate\PYGZus{}system}\PYG{o}{=}\PYG{n}{transformer}\PYG{o}{.}\PYG{n}{get\PYGZus{}to\PYGZus{}coordinate\PYGZus{}system}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
        \PYG{p}{)}
\end{sphinxVerbatim}


\subsubsection{Records}
\label{\detokenize{Chap1/section3:records}}
\sphinxAtStartPar
The records refer to the list of events after it is generated (de\sphinxhyphen{}serialized) into Kloppy classes.


\section{Result}
\label{\detokenize{Chap1/section4:result}}\label{\detokenize{Chap1/section4::doc}}
\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics{{result}.png}
\caption{Code exemple}\label{\detokenize{Chap1/section4:result-fig}}\end{figure}


\chapter{Physical  report}
\label{\detokenize{Chap2/chap2:physical-report}}\label{\detokenize{Chap2/chap2::doc}}

\section{Introduction}
\label{\detokenize{Chap2/chap2:introduction}}

\section{Tracking Data}
\label{\detokenize{Chap2/chap2:tracking-data}}

\section{Workflow}
\label{\detokenize{Chap2/chap2:workflow}}

\subsection{Minutes played}
\label{\detokenize{Chap2/chap2:minutes-played}}

\subsection{Distance covered}
\label{\detokenize{Chap2/chap2:distance-covered}}

\subsection{Report}
\label{\detokenize{Chap2/chap2:report}}

\section{Result}
\label{\detokenize{Chap2/chap2:result}}
\begin{sphinxuseclass}{cell}\begin{sphinxVerbatimInput}

\begin{sphinxuseclass}{cell_input}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
x = \PYGZdq{}1 Mathew Ryan (GK)\PYGZdq{}
(?=\PYGZus{})
\end{sphinxVerbatim}

\end{sphinxuseclass}\end{sphinxVerbatimInput}
\begin{sphinxVerbatimOutput}

\begin{sphinxuseclass}{cell_output}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
  Input In [1]
    (?=\PYGZus{})
     \PYGZca{}
SyntaxError: invalid syntax
\end{sphinxVerbatim}

\end{sphinxuseclass}\end{sphinxVerbatimOutput}

\end{sphinxuseclass}

\chapter{Data Visualization}
\label{\detokenize{Chap3/Chap3:data-visualization}}\label{\detokenize{Chap3/Chap3::doc}}

\section{Introduction}
\label{\detokenize{Chap3/Chap3:introduction}}
\sphinxAtStartPar
In this chapter, we will visualize the data we were working on, so that we can present them with the best layout and the best way.


\section{FrameWork}
\label{\detokenize{Chap3/Chap3:framework}}
\sphinxAtStartPar
Away from the basic softwares used for data visualisation, We will stick to Python and create the dashboard from scratch using dash\sphinxhyphen{}plotly as a framework. We’re going to build an analytical web application.


\subsection{What is Dash ?}
\label{\detokenize{Chap3/Chap3:what-is-dash}}
\sphinxAtStartPar
Dash is a python framework created by plotly for creating interactive web applications. Dash is written on the top of Flask, Plotly.js and React.js.Dash is open source and the application build using this framework are viewed on the web browser.

\sphinxAtStartPar
The Dash application is made of two building blocks
\begin{description}
\item[{Layout :}] \leavevmode
\sphinxAtStartPar
It defines the structure of the application . Elements used such as dropdowns , buttons , graphs etc and the placement , size , color etc. Dash contains Dash HTML components which we can create and style HTML content such as heading, paragraph, images etc using python . Elements such as dropdowns, graphs, cards are created using Dash Core components.
Dash also includes Dash Bootstrap components that makes it easier to build consistently styled apps with complex, responsive layouts.

\item[{Callbacks :}] \leavevmode
\sphinxAtStartPar
Are used to bring interactivity to the dash application. These are the functions using which, for example, we can define the activity that would happen on clicking a button or a dropdown.

\end{description}


\subsection{Dash Bootstrap Components}
\label{\detokenize{Chap3/Chap3:dash-bootstrap-components}}
\sphinxAtStartPar
For improved layout design, we will use Bootstrap. Dash\sphinxhyphen{}bootstrap\sphinxhyphen{}components is a library of Bootstrap components for Plotly Dash, that makes it easier to build consistently styled apps with complex, responsive layouts.


\section{Dashboard Content}
\label{\detokenize{Chap3/Chap3:dashboard-content}}

\subsection{Match page}
\label{\detokenize{Chap3/Chap3:match-page}}
\sphinxAtStartPar
The landing page which contains game information such as home team and away team, name and score also two buttons to pass to display the line\sphinxhyphen{}up for each team and comparison of players.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics{{landingpage}.png}
\caption{The landing page.}\label{\detokenize{Chap3/Chap3:landingpage-fig}}\end{figure}
\begin{description}
\item[{\sphinxstylestrong{Line\sphinxhyphen{}up :}}] \leavevmode
\sphinxAtStartPar
The line\sphinxhyphen{}up is ordered as player positions in the field.

\end{description}


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|}
\hline
\sphinxstyletheadfamily 
\sphinxAtStartPar
Position
&\sphinxstyletheadfamily 
\sphinxAtStartPar
name
\\
\hline
\sphinxAtStartPar
GK
&
\sphinxAtStartPar
Goal Keeper
\\
\hline
\sphinxAtStartPar
Defenders
&
\sphinxAtStartPar
CF center forward / RF right forward
\\
\hline
\sphinxAtStartPar
Midfielders
&
\sphinxAtStartPar
DM defensive Midfield / RM right midfield / LM left midfield
\\
\hline
\sphinxAtStartPar
Forwards
&
\sphinxAtStartPar
CB center back / RCB right center back / LCB left center back
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[height=300\sphinxpxdimen]{{positions}.png}
\caption{This images illustrate the players position on the field.}\label{\detokenize{Chap3/Chap3:positions-fig}}\end{figure}

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics{{lineuppage}.png}
\caption{Displayed content after clicking on line\sphinxhyphen{}up button.}\label{\detokenize{Chap3/Chap3:lineuppage-fig}}\end{figure}


\subsection{Player page}
\label{\detokenize{Chap3/Chap3:player-page}}
\sphinxAtStartPar
It is the main page on which the player performance information will be displayed.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics{{playerpage}.png}
\caption{Displayed content after clicking on a player in the line\sphinxhyphen{}up.}\label{\detokenize{Chap3/Chap3:playerpage-fig}}\end{figure}


\subsection{Player Comparison}
\label{\detokenize{Chap3/Chap3:player-comparison}}
\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics{{playercomp}.png}
\caption{Displayed content after clicking on the player comparison button.}\label{\detokenize{Chap3/Chap3:playercomp-fig}}\end{figure}







\renewcommand{\indexname}{Index}
\printindex
\end{document}